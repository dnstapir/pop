# manually maintained

cli:
   tem:
      url:	https://127.0.0.1:9099/api/v1
      tlsurl:	https://127.0.0.1:9098/api/v1
      apikey:	be-nice-to-a-bad-tempered-tapir
   dtm:
      tlsurl:	https://127.0.0.1:9090/

apiserver:
   key:		be-nice-to-a-bad-tempered-tapir
   address:	127.0.0.1:9099
   tlsaddress:	127.0.0.1:9098

mqtt:
   server:		mqtt.dev.dnstapir.se:8883
   uid:			johani
   clientid:		johani-tem
   topic:		events/up/johani/frobozz
   cacert:              /etc/dnstapir/certs/tapirCA.crt
   clientcert:          /etc/dnstapir/certs/mqttclient.crt
   clientkey:           /etc/dnstapir/certs/mqttclient-key.pem
   signingkey:          /etc/dnstapir/certs/mqttsigner-key.pem
   validatorkey:        /etc/dnstapir/certs/mqttsigner-pub.pem
   qos:                 2

# server:
#    listen:	127.0.0.1
#    port:	9097
#   upstreams:	[ nsa.johani.org:53 ]
#   downstreams:	[ 127.0.0.1:9999 ]  	# unbound
#   xferzones:	[ ]  # not useful for TAPIR
#   mapzones:	[ ]  # likely not useful for TAPIR
#   slicezones:	[ rpz.threat-feed.com ]
#   slicezones:	[ ]

dnsengine:
   addresses:	127.0.0.1:5359

output:
   reaper:
      interval: 60 # seconds, time between runs of deleting expired data
   rpz:
      zonename:		rpz.
      primary:		127.0.0.1:5359	# must be an address that the dnsengine listens to

service:
   name:		foobar
   filter:		dnssec+zonemd
   reset_soa_serial:	true
   verbose:		true
   debug:		true
   refresh:
      active:	true

redirects:
   tapir:	landing-page.dnstapir.se
   police:	www.polisen.se

# policies ONLY affect GREYLISTED sources. whitelisted and blacklisted
# sources go stright into (or not) the resulting RPZ
# known actions: passthru, drop, nxdomain, nodata, tapir, police
policies:
   default:
      taglimit:		3	# i.e. 4 TAPIR tags and you're out
      tagaction:	nxdomain
      feedlimit:	1	# i.e. name present in multiple feeds will be blocked
      feedaction:	nodata
      hardblock:	[ barnporr-feed ]	# name present in one of these is always blocked
      hardaction:	police
   johani:
      taglimit:		0	# i.e. 1 TAPIR tag and you're out
      tagaction:	nxdomain
      feedlimit:	0	# i.e. name present in any feeds will be blocked
      feedaction:	nodata
      hardblock:	[ barnporr-feed ]	# name present in one of these is always blocked
      hardaction:	police

certs:
   certdir:	/etc/dnstapir/certs
   cacertfile:	/etc/dnstapir/certs/axfr.netCA.crt
   tem:
      cert:	/etc/dnstapir/certs/tem.crt
      key:	/etc/dnstapir/certs/tem.key
   tapir-cli:
      cert:	/etc/dnstapir/certs/tem.crt
      key:	/etc/dnstapir/certs/tem.key

log:
   file:	/var/log/dnstapir/tem.log
